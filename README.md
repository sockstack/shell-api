<div align="center">

![](https://one-api.oss-rg-china-mainland.aliyuncs.com/Logo-new-150.png)

</div>
<div align="center">

# Shell API

âœ¨ åŸºäº One API äºŒæ¬¡å¼€å‘ï¼Œæä¾›å…¨æ–°UIä¸æ›´å¤šé«˜çº§é€‰é¡¹ï¼Œæ”¯æŒDockeréƒ¨ç½² âœ¨

</div>


## æ–°ç‰ˆç‰¹æ€§

0. ä¸å¼€æºç‰ˆå®Œå…¨å…¼å®¹
    + [x] ä¿ç•™æ—§ç‰ˆæ‰€æœ‰é…ç½®ï¼Œç›´æ¥è¿ç§»ï¼Œå¼€ç®±å³ç”¨
1. å…¨æ–°UIéœ‡æ’¼æ¥è¢­
    + [x] æ”¯æŒåˆ‡æ¢æ—§ç‰ˆ
    + [x] æç¤ºæ¶ˆæ¯å†…å®¹åŸºæœ¬æ±‰åŒ–
    + [x] å¢åŠ åˆ†é¡µå™¨ï¼Œæ¯é¡µå±•ç¤ºå†…å®¹æ›´å¤š
    + [x] å¢åŠ è¡¨å¤´ç­›é€‰ï¼Œå¿«é€Ÿç­›é€‰å¯¹åº”å†…å®¹
    + [x] æ”¯æŒè‡ªé€‰å¯¼èˆªä½ç½®ï¼ˆé¡¶æ /ä¾§æ ï¼‰
    + [x] å¢å¼ºæ—¥å¿—å±•ç¤ºï¼Œæ–¹ä¾¿å®šä½é—®é¢˜
    + [x] å¢åŠ ä¸€é”®å¡«å†™ç¾é‡‘é¢åº¦ä»¤ç‰Œï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥
    + [x] å¢åŠ ä¸€é”®å¤åˆ¶ç”¨æˆ·ä¿¡æ¯ã€ä¿®æ”¹ç”¨æˆ·é¢åº¦åŠŸèƒ½
    + [ ] æ”¯æŒè‡ªå®šä¹‰é…ç½®æ‚¬æµ®æŒ‰é’®ã€å‹æƒ…é“¾æ¥
    + [ ] é€‚é…æ‰‹æœºç‰ˆé¡µé¢
    + [ ] å…¨æ–°ä»ªè¡¨ç›˜ï¼Œæ‰€æœ‰æ•°æ®ä¸€è§ˆæ— é—
    + [ ] ä¼˜åŒ–æ—¥å¿—å±•ç¤ºï¼Œæ”¯æŒæ—¥å¿—å¯¼å‡º
    + [ ] è‡ªé€‰ä¸»é¢˜å¸‚åœº
    + [ ] æ”¯æŒåˆ‡æ¢æ·±è‰²æ¨¡å¼
2. æ›´å¤šé«˜çº§åŠŸèƒ½
    + [x] å¼ºåˆ¶æŒ‡å®šæ¸ é“ä½¿ç”¨é¡ºåº
        + å¦‚é€šé“Aã€Bé…ç½®é¡ºåºä¸º3ï¼Œé€šé“Cé…ç½®é¡ºåºä¸º2ï¼Œåˆ™åªæœ‰Aå’ŒBéƒ½è¢«ç¦ç”¨æ‰ä¼šä½¿ç”¨C
    + [x] æ”¯æŒ429è¶…é¢‘æŠ¥é”™è‡ªåŠ¨ç¦ç”¨
        + è¶…è¿‡é¢‘ç‡é™åˆ¶çš„è¯·æ±‚ä¼šè‡ªåŠ¨ç¦ç”¨ï¼Œé¿å…é‡å¤è¿”å›è¶…é¢‘æŠ¥é”™
    + [x] æ”¯æŒæ¸ é“è¶…é¢‘è‡ªåŠ¨å¤æ´»
        + è¶…é¢‘ç¦ç”¨åæ¯éš”æŒ‡å®šé…ç½®çš„æ—¶é—´è‡ªåŠ¨æµ‹è¯•é€šé“,æµ‹è¯•é€šè¿‡åˆ™è‡ªåŠ¨å¯ç”¨
    + [x] æ–°å¢ä¸€é”®è¶…é¢‘åŠŸèƒ½
        + é…ç½®æ¸ é“æ—¶ï¼Œä¸€é”®ç‚¹å‡»å³å¯å¼€å¯è¶…é¢‘
    + [x] ä¼˜åŒ–æµ‹é€Ÿæ–¹æ¡ˆ,æ”¯æŒ**æµå¼æµ‹é€Ÿ**
    + [x] æ”¯æŒè‡ªå®šä¹‰æ¸ é“é“¾æ¥
    + [x] æ—¥å¿—å±•ç¤ºæ¸ é“åç§°ï¼Œä¸”å¯ä»¥æ ¹æ®æ¸ é“åç§°æœç´¢è¿‡æ»¤
    + [x] ä¼˜åŒ–æµ‹é€Ÿæ–¹å¼ï¼Œç›¸è¾ƒåŸç‰ˆèŠ‚çœæ›´å¤štoken
    + [x] OpenAIæ”¯æŒæŒ‡å®šç»„ç»‡æ¶ˆè€—
    + [x] ç¼–è¾‘çš„æ—¶å€™å¯ä»¥æ§åˆ¶æ˜¾ç¤º/éšè—ç§˜é’¥
    + [x] ç”¨æˆ·è¯·æ±‚ã€å“åº”çš„å†…å®¹å­˜è¡¨å¹¶æ”¯æŒå‰ç«¯æŸ¥è¯¢
    + [x] **ä¿®å¤åŸå§‹ç‰ˆæœ¬ä½™é¢ä¸è¶³çš„ç”¨æˆ·å»è¯·æ±‚æ—¶å€™ä¼šè‡ªåŠ¨ç¦ç”¨é€šé“çš„bug**
    + [x] å¢åŠ è‡ªå®šä¹‰æµ‹é€Ÿä»¥åŠJSONä¸€é”®å¡«å…¥åŠŸèƒ½ï¼Œæ‰“ç ´åŸç‰ˆé»˜è®¤åªæœ‰3.5æµ‹é€Ÿçš„å±€é™
    + [x] æŸ¥è¯¢ä½™é¢æ”¯æŒè·¨åŸŸè¯·æ±‚
    + [x] å¢åŠ é«˜çº§æµ‹é€ŸåŠŸèƒ½
    + [x] é˜²æ­¢openaiæŠ½é£è¶…é¢æ‰£è´¹å‡ºç°çš„çš„çš„çš„çš„çš„çš„çš„çš„çš„çš„
    + [x] å¢åŠ å¯¹è¯ä¸€é”®å¡«å……ä»¤ç‰ŒåŠŸèƒ½
    + [x] å¢åŠ SMTP é…ç½®å‘é€æµ‹è¯•é‚®ä»¶
    + [ ] æ–°å¢æ¸ é“ç»„åŠŸèƒ½ï¼Œæ›´ç¬¦åˆå®é™…ä½¿ç”¨åœºæ™¯

## æˆªå›¾å±•ç¤º
![img.png](img.png)
![img_1.png](img_1.png)
![img_2.png](img_2.png)
![img_3.png](img_3.png)
![img_7.png](img_7.png)
![img_4.png](img_4.png)
![img_5.png](img_5.png)
![img_6.png](img_6.png)
![img_8.png](img_8.png)
![img_9.png](img_9.png)
![img_10.png](img_10.png)
![img_11.png](img_11.png)
![img_12.png](img_12.png)
![img_31.png](img_31.png)
![img_13.png](img_13.png)
![img_30.png](img_30.png)
![img_14.png](img_14.png)
![img_15.png](img_15.png)
![img_16.png](img_16.png)
![img_17.png](img_17.png)
![img_18.png](img_18.png)
![img_19.png](img_19.png)
![img_20.png](img_20.png)
![img_21.png](img_21.png)
![img_22.png](img_22.png)
![img_23.png](img_23.png)
![img_24.png](img_24.png)
![img_25.png](img_25.png)
![img_26.png](img_26.png)
![img_27.png](img_27.png)
![img_28.png](img_28.png)
![img_29.png](img_29.png)
## éƒ¨ç½²
### ä¸€ã€é¦–æ¬¡å®‰è£…
#### 1.è¿æ¥äº‘æœåŠ¡å™¨
```bash
ssh username@yourserver
```
#### 2.è·å–æœ€æ–°ç‰ˆçš„docker-composeé…ç½®æ–‡ä»¶
```bash
#æ–°å»ºç›®å½•
mkdir shellapi
#æ‹‰å–é…ç½®æ–‡ä»¶
wget -P shellapi/ https://one-api.oss-rg-china-mainland.aliyuncs.com/docker-compose.yml
```
#### 3.ä¿®æ”¹ docker-compose.yml æ–‡ä»¶ä¸­ç›¸å…³è®¾ç½®
```bash
#è¿›å…¥ç›®å½•
cd shellapi 
#ä½¿ç”¨viç¼–è¾‘æ–‡ä»¶
vi docker-compose.yml
```
```yaml
#å¦‚æœä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·æ‰‹åŠ¨ä¿®æ”¹ tagï¼š
image: akl7777777/one-api-private:v0.x.y
# ä½¿ç”¨MySQLä½œä¸ºæ•°æ®åº“ï¼Œä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç ï¼›ä¸ä½¿ç”¨MySQLä½œä¸ºæ•°æ®åº“ï¼Œæ³¨é‡Šè¿™ä¸¤è¡Œï¼š
- SQL_DSN=root:123456@tcp(host.docker.internal:3306)/one-api
- DW_DB_DSN=root:123456@tcp(host.docker.internal:3306)/one-api
```
#### 4.å¯åŠ¨å®¹å™¨
```bash
#ç™»å½•docker
docker login
#å¯åŠ¨å®¹å™¨
docker-compose up -d
```
#### 5.é…ç½®åå‘ä»£ç†
ğŸ“Œ é»˜è®¤ç«¯å£ä¸º 3000 ç«¯å£ï¼Œå¦‚æœå¼€å¯äº†é˜²ç«å¢™ï¼Œè¯·æ³¨æ„å¼€æ”¾ç«¯å£
```nginx
server{
   server_name api.shellapi.plus;  # æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹åŸŸå
   location / {
          client_max_body_size  64m;
          proxy_http_version 1.1;
          proxy_pass http://localhost:3000;  # æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ç«¯å£
          proxy_set_header Host $host;
          proxy_set_header X-Forwarded-For $remote_addr;
          proxy_cache_bypass $http_upgrade;
          proxy_set_header Accept-Encoding gzip;
          proxy_read_timeout 300s;  # GPT-4 éœ€è¦è¾ƒé•¿çš„è¶…æ—¶æ—¶é—´ï¼Œè¯·è‡ªè¡Œè°ƒæ•´
   }
}
```
### äºŒã€æ›´æ–°
```bash
#è¿›å…¥ç›®å½•
cd shellapi
#ä½¿ç”¨viç¼–è¾‘æ–‡ä»¶ï¼Œä¿®æ”¹ tag ä¸ºæœ€æ–°ç‰ˆæœ¬
vi docker-compose.yml
#é‡æ–°åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨
docker-compose up -d
```